# How to adjust the acquisition diagram

This document details how to add, remove and adjust different parts of the
diagram generated by acquisition_diagram.py.

## Table of contents
1. [Adding new protocols](#Adding new protocols)
2. [Size of the figure and relative size of the elements](#Size and relative size of the elements)

## Adding new protocols
To add a new row to the figure, you will need to add several things to
add several things to the script ('acquisitions_diagram.py'):
* Session label to the 'protocol_order' list (line 39)
* Session name to the 'labels' list (line 66)
* A task list with the session contest to the 'sessions' list (line 91)

In addition,
* A session structure file in the 'sessions' folder, in .csv format
* Timings for any new task types you use (like your experimental blocks)
  in the 'task_duration.csv' file

N.B.: 
* The session label must be the same as the name of the csv file you will
put in the 'sessions' folder. You can change the order of the elements to
change the order of the rows in the figure (first goes at bottom).
* The session name will be displayed at the left of the bar for each row.
* The y_task offset is used to adjust the height of the labels at the right
of the color bar. Depending on the number of tasks in your session, you
will have to select a different value in order to center it with the bar.
* The list of tasks can be anything. Here we have a task and the number of
runs of each of them as elements of the list.
* The .csv file in the 'sessions' folder is composed of row whose first
element denotes the type of sequence (from the types written in sequence_
type.csv) and a name of your choice. This name will be the same as the one
you use to delimit the duration in 'task_duration.csv', expressed in seconds.

## Size and relative size of the elements
In 'acquisitions_diagram.py':
* The size of the figure can be found in line 28 as a tuple of dimensions
(height, length). This corresponds to the size of the output image, but
the size of all the other elements will scale with this, so adding new
rows requires that the size be increased and the relative sizes of the
individual elements be reduced.
* Lines 48-57 contain variables related to the size, position and distance
between the rectangles that form the rows. The length of each rectangle 
inside the same row is determined by the duration of the sequence it refers
to.
* Lines 58-77 contain information about the (left side) labels: their starting
position, the space between them, and also the font size.
* Lines 78-127 contain similar variables, this time relative to the task
names found at the right of each row.
* Lines 128-140 contain the information about the position of
the time arrow found at the bottom of the figure.
* Lines 141-169 contains similar information for the legend.

